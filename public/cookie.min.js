(function() { var consentPopup = document.getElementById('privacy-consent-popup'); var mainView = consentPopup.querySelector('.consent-main-view'); var settingsView = consentPopup.querySelector('.consent-box-settings'); var acceptAllBtn = document.getElementById('acceptAllCookies'); var rejectAllBtn = document.getElementById('rejectAllCookies'); var manageBtn = document.getElementById('manageCookiePreferences'); var savePreferencesBtn = document.getElementById('saveCookiePreferences'); var backBtn = document.getElementById('backToMainView'); var analyticsToggle = document.getElementById('cookie-analytics'); var marketingToggle = document.getElementById('cookie-marketing'); function hidePopup() { consentPopup.style.display = 'none'; } function showPopup() { consentPopup.style.display = 'block'; mainView.style.display = 'flex'; settingsView.style.display = 'none'; } function saveConsent(preferences) { localStorage.setItem('cookieConsent', JSON.stringify(preferences)); hidePopup(); } function getConsent() { var consent = localStorage.getItem('cookieConsent'); return consent ? JSON.parse(consent) : null; } function initializeToggles(preferences) { if (preferences) { analyticsToggle.checked = preferences.analytics; marketingToggle.checked = preferences.marketing; } else { analyticsToggle.checked = false; marketingToggle.checked = false; } } var userConsent = getConsent(); if (!userConsent) { showPopup(); } else { initializeToggles(userConsent); } acceptAllBtn.addEventListener('click', function() { saveConsent({ essential: true, analytics: true, marketing: true }); }); rejectAllBtn.addEventListener('click', function() { saveConsent({ essential: true, analytics: false, marketing: false }); }); manageBtn.addEventListener('click', function() { mainView.style.display = 'none'; settingsView.style.display = 'flex'; initializeToggles(getConsent() || {essential: true, analytics: false, marketing: false}); }); savePreferencesBtn.addEventListener('click', function() { var preferences = { essential: true, analytics: analyticsToggle.checked, marketing: marketingToggle.checked }; saveConsent(preferences); }); backBtn.addEventListener('click', function() { settingsView.style.display = 'none'; mainView.style.display = 'flex'; }); })();